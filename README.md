
---

# üìù TODO API with PostgreSQL, SQLC & CI/CD

This project is a **simple TODO management REST API** built with **Go** and **PostgreSQL**, originally based on an SQLC example API and then transformed into a standalone TODO application.
The project was developed and tested entirely using **GitHub Codespaces**.

---

## üöÄ Features

* Create, list, retrieve, and delete TODO items
* PostgreSQL database with strongly-typed queries generated by **SQLC**
* REST API using **Chi Router**
* Environment variable configuration with `.env`
* Fully automated **CI pipeline** using **GitHub Actions**
* Dependency vulnerability scanning
* Code linting and formatting checks
* Unit test execution
* Conditional binary build (only if checks pass)

---

## üèóÔ∏è Tech Stack

* **Language:** Go
* **Database:** PostgreSQL
* **SQL Tooling:** SQLC
* **Router:** go-chi/chi
* **Driver:** pgx
* **CI/CD:** GitHub Actions
* **Development Environment:** GitHub Codespaces

---

## üìÇ Project Structure

```
.
‚îú‚îÄ‚îÄ cmd/
‚îÇ   ‚îî‚îÄ‚îÄ server/          # Application entry point
‚îÇ       ‚îî‚îÄ‚îÄ main.go
‚îú‚îÄ‚îÄ internal/
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ sqlc/        # SQLC-generated queries
‚îÇ   ‚îî‚îÄ‚îÄ handlers/        # HTTP handlers
‚îÇ       ‚îî‚îÄ‚îÄ todos.go
‚îú‚îÄ‚îÄ migrations/          # Database migrations
‚îú‚îÄ‚îÄ .github/
‚îÇ   ‚îî‚îÄ‚îÄ workflows/
‚îÇ       ‚îî‚îÄ‚îÄ ci.yml       # CI pipeline
‚îú‚îÄ‚îÄ go.mod
‚îú‚îÄ‚îÄ go.sum
‚îú‚îÄ‚îÄ .env.example
‚îî‚îÄ‚îÄ README.md
```


A simple yet production-style Todo REST API built with Go, PostgreSQL, sqlc, and Docker.

> üöÄ This project was developed and tested using GitHub Codespaces to ensure a fully cloud-based, reproducible development environment.



---

‚ú® Features

CRUD operations for Todos

PostgreSQL persistence

Type-safe SQL using sqlc

Dockerized database

Clean Go project structure

Ready for extension (auth, pagination, users)



---

üõ† Tech Stack

Go 1.22

PostgreSQL

sqlc

Docker & docker-compose

GitHub Codespaces



---


üöÄ Running the Project (GitHub Codespaces)

1Ô∏è‚É£ Open in GitHub Codespaces

Click Code ‚Üí Codespaces ‚Üí Create codespace

Wait for the environment to finish initializing

Open the terminal


> üí° Codespaces provides Docker and Go pre-installed.


---

2Ô∏è‚É£ Install PostgreSQL client (psql)
`
sudo apt update
sudo apt install postgresql-client -y
`
Verify:
`
psql --version
`

---

3Ô∏è‚É£ Start PostgreSQL (Docker)
`
docker-compose up -d
`
Confirm:
`
docker ps
`

---

4Ô∏è‚É£ Apply database migrations
`
psql postgres://postgres:postgres@localhost:5432/todoapp \
  -f migrations/0001_init.up.sql
`

  ---

  5Ô∏è‚É£ Generate sqlc code
`
  sqlc generate
`

  ---

  6Ô∏è‚É£ Install Go dependencies automatically
`
  go mod tidy
`

  ---

  7Ô∏è‚É£ Run the API server
`
  go run ./cmd/server
`
  Server starts on:

  http://localhost:8080


  ---

  üîå API Endpoints

  Create a Todo
`
  POST /todos
`
  {
      "title": "Learn sqlc"
  }


  ---

  List Todos
`
  GET /todos
`

  ---

  Get Todo by ID
`
  GET /todos/{id}
`

  ---

  Update Todo
`
  PATCH /todos/{id}
`
  {
      "completed": true
  }


  ---

  Delete Todo
`
  DELETE /todos/{id}
`

  ---

  üß™ Quick Test (curl)
`
  curl -X POST http://localhost:8080/todos \
    -H "Content-Type: application/json" \
      -d '{"title":"First Todo"}'
`

      ---

      üß† Notes

      Environment variables are defined in .env.example

      PostgreSQL runs in Docker

      Dependencies are managed automatically via Go modules

      sqlc ensures compile-time SQL correctness



      ----

      ‚úÖ Project Status

      ‚úî Completed
      ‚úî Fully functional
      ‚úî GitHub Codespaces compatible
      ‚úî Ready for extension and production hardening


      ---

      üìå Possible Improvements

      User authentication (JWT)

      Pagination & filtering

      Automated migrations

      Unit & integration tests

      CI/CD pipeline

      Deployment to Fly.io / Render

---

## ‚öôÔ∏è Running the Project (GitHub Codespaces)

This project was built and tested inside **GitHub Codespaces**, which provides Go and Docker out of the box.

### 1Ô∏è‚É£ Start PostgreSQL

```bash
sudo service postgresql start
```

Create a database if needed:

```bash
createdb todo_db
```

---

### 2Ô∏è‚É£ Configure Environment Variables

Create a `.env` file:

```env
DATABASE_URL=postgres://postgres:postgres@localhost:5432/todo_db?sslmode=disable
```

---

### 3Ô∏è‚É£ Install Go Dependencies

Go automatically installs dependencies when you run:

```bash
go mod tidy
```

---

### 4Ô∏è‚É£ Run Database Migrations

```bash
psql $DATABASE_URL -f migrations/schema.sql
```

---

### 5Ô∏è‚É£ Start the API Server

```bash
go run ./cmd/server
```

The API will run on:

```
http://localhost:8080
```

---

## üì° API Endpoints

### Create TODO

```
POST /todos
```

```json
{
  "title": "Finish CI assignment"
}
```

### List TODOs

```
GET /todos
```

### Get TODO by ID

```
GET /todos/{id}
```

### Delete TODO

```
DELETE /todos/{id}
```

---

## üîÅ Continuous Integration (CI)

This project includes a **GitHub Actions CI pipeline** that runs automatically on every push and pull request.

### CI Steps

1. **Dependency Vulnerability Scan**

   * Uses `govulncheck`

2. **Linting & Static Analysis**

   * Uses `golangci-lint`

3. **Unit Tests**

   * Runs `go test ./...`

4. **Build Binary**

   * Runs **only if all previous steps succeed**

---

### üß™ Run CI Steps Locally

```bash
# Vulnerability scan
go run golang.org/x/vuln/cmd/govulncheck@latest ./...

# Lint
go run github.com/golangci/golangci-lint/cmd/golangci-lint@v1.55.2 run ./...

# Tests
go test ./...

# Build
go build -o ./bin/api ./cmd/server
```

---

## ‚úÖ CI Design Decision

The binary build step is **intentionally executed only after**:

* Linting passes
* Vulnerability scan passes
* Tests pass

This ensures that **only secure and clean code is built**, following best CI/CD practices.

---

## üß† What I Learned

* Structuring a Go API using clean architecture
* Using SQLC for type-safe database access
* Handling PostgreSQL in GitHub Codespaces
* Writing and debugging GitHub Actions workflows
* Enforcing code quality with linters
* Using CI to catch real production-level issues early

---

## üìå Notes

* No unit tests are currently implemented; `go test ./...` runs successfully with no test files.
* This is intentional and acceptable for the current stage of the assignment.

---

## üë§ Author

**Developed by:** Leonie 

**Environment:** GitHub Codespaces

---


  

  

 
